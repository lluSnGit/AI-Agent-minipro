<view class="container">
  <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->
  <view class="image-upload-section">
    <view class="image-label">è¾“å…¥å›¾ç‰‡ *</view>
    <view class="image-upload-box" bindtap="chooseImage">
      <image wx:if="{{image}}" class="uploaded-image" src="{{image}}" mode="aspectFit" />
      <view wx:else class="upload-placeholder">
        <text class="upload-icon">ğŸ“·</text>
        <text class="upload-text">ç‚¹å‡»é€‰æ‹©å›¾ç‰‡</text>
      </view>
    </view>
    <button wx:if="{{image}}" class="remove-btn" bindtap="removeImage">ç§»é™¤</button>
  </view>

  <!-- è¾“å…¥åŒºåŸŸ -->
  <view class="input-section">
    <view class="input-label">æç¤ºè¯ *</view>
    <textarea 
      class="prompt-input" 
      placeholder="ä¾‹å¦‚ï¼šç”Ÿæˆä¹å®«æ ¼å¤šè§’åº¦å›¾ç‰‡"
      value="{{prompt}}"
      bindinput="onPromptInput"
      maxlength="500"
      show-confirm-bar="{{false}}"
    />
    <view class="char-count">{{prompt.length}}/500</view>
  </view>

  <!-- é«˜çº§é€‰é¡¹ -->
  <view class="input-section">
    <view class="input-label">è´Ÿé¢æç¤ºè¯ï¼ˆå¯é€‰ï¼‰</view>
    <textarea 
      class="prompt-input" 
      placeholder="ä¾‹å¦‚ï¼šbroken image, split view, grid, multiple angles, frame, border, black bar"
      value="{{negativePrompt}}"
      bindinput="onNegativePromptInput"
      maxlength="500"
      show-confirm-bar="{{false}}"
    />
    <view class="char-count">{{negativePrompt.length}}/500</view>
  </view>

  <view class="input-section">
    <view class="input-label">éšæœºç§å­ï¼ˆå¯é€‰ï¼‰</view>
    <input 
      class="seed-input" 
      type="number"
      placeholder="ç•™ç©ºåˆ™éšæœºç”Ÿæˆ"
      value="{{seed}}"
      bindinput="onSeedInput"
    />
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section">
    <button 
      class="generate-btn {{loading ? 'loading' : ''}}" 
      bindtap="onGenerate"
      disabled="{{loading || !imagePath || prompt.length === 0}}"
    >
      {{loading ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆä¹å®«æ ¼å›¾'}}
    </button>
  </view>

  <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
  <view class="result-section" wx:if="{{generatedImages.length > 0}}">
    <view class="result-title">ç”Ÿæˆçš„ä¹å®«æ ¼å›¾ï¼ˆå…±{{generatedImages.length}}å¼ ï¼‰</view>
    <view class="grid-container">
      <view 
        class="grid-item" 
        wx:for="{{generatedImages}}" 
        wx:key="node_id"
        wx:for-index="index"
        bindtap="previewImage"
        data-index="{{index}}"
      >
        <image 
          class="grid-image" 
          src="{{item.url}}" 
          mode="aspectFill"
        />
        <view class="grid-overlay">
          <text class="grid-index">{{index + 1}}</text>
        </view>
      </view>
    </view>
    <view class="result-actions">
      <button class="action-btn" bindtap="saveAllImages">ä¿å­˜æ‰€æœ‰å›¾ç‰‡</button>
      <button class="action-btn" bindtap="regenerate">é‡æ–°ç”Ÿæˆ</button>
    </view>
  </view>

  <!-- é”™è¯¯æç¤º -->
  <view class="error-message" wx:if="{{errorMessage}}">
    {{errorMessage}}
  </view>
</view>

<!-- åº•éƒ¨å“ç‰Œå±•ç¤ºï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ -->
<brand-footer />

<!-- å…¨å±€å¯æ‹–åŠ¨å®¢æœæ‚¬æµ®æŒ‰é’® -->
<floating-cs />

